var GameObject=function(a,b){this.__constructor=function(){this.label=a||null,this.wins=b||null},this.winsTo=function(a){return a===this?0:this.wins===a?1:-1},this.__constructor()},GameState=function(){this.gameObjects={},this.playable=!0,this.__constructor=function(){this.player1=new Player("Player"),this.player2=new Player("Computer"),this.gameObjects.paper=new GameObject("Paper"),this.gameObjects.scissors=new GameObject("Scissors",this.getGameObject("paper")),this.gameObjects.rock=new GameObject("Rock",this.getGameObject("scissors")),this.gameObjects.paper.wins=this.getGameObject("rock")},this.getWinner=function(a){var a=a||3,b=Math.ceil(a/2),c=this.player1.score,d=this.player2.score;return c+d===a?c>=b?this.player1:this.player2:c===b?this.player1:d===b?this.player2:!1},this.makePlay=function(a){if(this.playable){if("PvsC"===this.gameType)var b=this.gameObjects[a];else var b=this.player1.randomPlay();var c=this.player2.randomPlay(),d=b.winsTo(c);1===d?this.player1.score++:-1===d&&this.player2.score++,this.UI.updateScores(),this.UI.updateCurrentPlay(b,c);var e=this.getWinner(5);e&&(this.playable=!1,setTimeout(function(){clearTimeout(this.computerPlayTimer),this.UI.showPhase(2),this.UI.showWinner(e)}.bind(this),2e3))}},this.getGameObject=function(a){return this.gameObjects[a]||null},this.restart=function(){this.playable=!0,this.UI.showPhase(0)},this.computerPlay=function(){this.player1.name="Computer 1",this.player2.name="Computer 2",this.UI.drawInterface(),this.computerPlayTimer=setInterval(this.makePlay.bind(this),2e3)},this.chooseType=function(a){this.gameType=a||"PvsC",this.UI.showPhase(1),this.player1.score=0,this.player2.score=0,this.player1.name="Player",this.player2.name="Computer",this.UI.reset(),"CvsC"===this.gameType&&this.computerPlay()},this.config=function(){this.UI=new UI,this.UI.showPhase(0),this.UI.drawInterface()},this.__constructor()},Player=function(a){this.__constructor=function(){this.name=a||"Player",this.score=0},this.randomPlay=function(){var a=game.gameObjects,b=Object.keys(a);return a[b[b.length*Math.random()|0]]},this.__constructor()},UI=function(){this.phase=0,this.phases=[],this.phases[0]=document.getElementById("gameTypeChoice"),this.phases[1]=document.getElementById("gamePlay"),this.phases[2]=document.getElementById("gameResults"),this.player1=document.getElementById("playerOne"),this.player2=document.getElementById("playerTwo"),this.showPhase=function(a){this.phase=a||0;for(var b=this.phases.length,c=null,d=0;b>d;d++)c=this.phases[d],c.style.display=d!==this.phase?"none":"block"},this.drawInterface=function(){var a=game.gameObjects,b=this.player1.querySelector(".name"),c=this.player2.querySelector(".name"),d=document.getElementById("commands");b.innerHTML=game.player1.name,c.innerHTML=game.player2.name;var e="";if("PvsC"===game.gameType)for(var f in a)a.hasOwnProperty(f)&&(e+='<a href="javascript:void(0);" onclick="game.makePlay(\''+f+'\')"><img src="img/'+f+'.png"></a>');d.innerHTML=e},this.updateScores=function(){var a=this.player1.querySelector(".score"),b=this.player2.querySelector(".score");a.innerHTML=game.player1.score,b.innerHTML=game.player2.score},this.message=function(a){var b=document.getElementById("message");b.innerHTML=a,setTimeout(function(){b.innerHTML=""},5e3)},this.showWinner=function(a){document.getElementById("gameResults").querySelector(".message").innerHTML=a.name+" wins!"},this.updateCurrentPlay=function(a,b){this.player1.querySelector(".play-choice").innerHTML='<img src="img/'+a.label.toLowerCase()+'.png">',this.player2.querySelector(".play-choice").innerHTML='<img src="img/'+b.label.toLowerCase()+'.png">'},this.reset=function(){this.player1.querySelector(".play-choice").innerHTML='<img src="img/noplay.png">',this.player2.querySelector(".play-choice").innerHTML='<img src="img/noplay.png">',this.updateScores(),this.drawInterface()}};